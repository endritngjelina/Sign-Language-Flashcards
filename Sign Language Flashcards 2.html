<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASL Master - Interactive Sign Language Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #007AFF;
            --primary-dark: #0056CC;
            --secondary: #5856D6;
            --success: #34C759;
            --warning: #FF9500;
            --error: #FF3B30;
            --background: #F2F2F7;
            --surface: #FFFFFF;
            --surface-secondary: #F9F9F9;
            --text-primary: #1D1D1F;
            --text-secondary: #6D6D80;
            --border: #D1D1D6;
            --shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
            --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-weight: 400;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--surface);
            padding: 12px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border);
        }

        .control-group label {
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.9rem;
            background: var(--surface);
            color: var(--text-primary);
            transition: var(--transition);
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            background: var(--surface);
            padding: 15px 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border);
            min-width: 120px;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .flashcard-container {
            perspective: 1000px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
        }

        .flashcard {
            width: 400px;
            height: 500px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 30px;
            background: var(--surface);
            border: 1px solid var(--border);
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .hand-sign {
            font-size: 8rem;
            margin-bottom: 20px;
            user-select: none;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .card-letter {
            font-size: 4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .card-word {
            font-size: 1.5rem;
            color: var(--text-primary);
            font-weight: 500;
            text-align: center;
            margin-bottom: 10px;
        }

        .card-description {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.4;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--surface-secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #28A745;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #E6830B;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 149, 0, 0.3);
        }

        .voice-controls {
            background: var(--surface);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border);
            margin-bottom: 30px;
        }

        .voice-controls h3 {
            margin-bottom: 15px;
            color: var(--text-primary);
            font-size: 1.3rem;
        }

        .voice-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--error);
            transition: var(--transition);
        }

        .status-indicator.listening {
            background: var(--success);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        .quiz-mode {
            background: var(--surface);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border);
            margin-bottom: 30px;
        }

        .quiz-mode h3 {
            margin-bottom: 20px;
            color: var(--text-primary);
            text-align: center;
            font-size: 1.3rem;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .quiz-option {
            padding: 15px;
            background: var(--surface-secondary);
            border: 2px solid var(--border);
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: rgba(0, 122, 255, 0.05);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(52, 199, 89, 0.1);
            color: var(--success);
        }

        .quiz-option.incorrect {
            border-color: var(--error);
            background: rgba(255, 59, 48, 0.1);
            color: var(--error);
        }

        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 15px;
            font-weight: 500;
            transition: var(--transition);
        }

        .feedback.correct {
            background: rgba(52, 199, 89, 0.1);
            color: var(--success);
            border: 1px solid rgba(52, 199, 89, 0.3);
        }

        .feedback.incorrect {
            background: rgba(255, 59, 48, 0.1);
            color: var(--error);
            border: 1px solid rgba(255, 59, 48, 0.3);
        }

        .accessibility-controls {
            background: var(--surface);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border);
            margin-bottom: 30px;
        }

        .accessibility-controls h3 {
            margin-bottom: 15px;
            color: var(--text-primary);
            font-size: 1.2rem;
        }

        .accessibility-options {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .high-contrast {
            --background: #000000;
            --surface: #1A1A1A;
            --surface-secondary: #2A2A2A;
            --text-primary: #FFFFFF;
            --text-secondary: #CCCCCC;
            --border: #444444;
        }

        .large-text .card-letter {
            font-size: 5rem;
        }

        .large-text .card-word {
            font-size: 2rem;
        }

        .large-text .hand-sign {
            font-size: 10rem;
        }

        @media (max-width: 768px) {
            .app-container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .flashcard {
                width: 320px;
                height: 420px;
            }

            .hand-sign {
                font-size: 6rem;
            }

            .card-letter {
                font-size: 3rem;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }

            .control-group {
                width: 100%;
                max-width: 300px;
                justify-content: space-between;
            }
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1>ASL Master</h1>
            <p>Professional American Sign Language Learning Platform</p>
        </header>

        <div class="accessibility-controls">
            <h3>Accessibility Options</h3>
            <div class="accessibility-options">
                <div class="checkbox-group">
                    <input type="checkbox" id="highContrast">
                    <label for="highContrast">High Contrast</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="largeText">
                    <label for="largeText">Large Text</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="reduceMotion">
                    <label for="reduceMotion">Reduce Motion</label>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="studyMode">Study Mode:</label>
                <select id="studyMode">
                    <option value="alphabet">Alphabet</option>
                    <option value="numbers">Numbers</option>
                    <option value="common-words">Common Words</option>
                    <option value="colors">Colors</option>
                    <option value="family">Family</option>
                </select>
            </div>
            <div class="control-group">
                <label for="difficulty">Difficulty:</label>
                <select id="difficulty">
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="advanced">Advanced</option>
                </select>
            </div>
            <div class="control-group">
                <label for="autoFlip">Auto-flip (seconds):</label>
                <input type="number" id="autoFlip" min="0" max="10" step="0.5" value="0">
            </div>
        </div>

        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-number" id="currentCard">1</span>
                <span class="stat-label">Current</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="totalCards">26</span>
                <span class="stat-label">Total</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="correctAnswers">0</span>
                <span class="stat-label">Correct</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="streakCount">0</span>
                <span class="stat-label">Streak</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="flashcard-container">
            <div class="flashcard" id="flashcard">
                <div class="card-face card-front">
                    <div class="hand-sign" id="handSign">ü§ö</div>
                    <div class="card-description">Click to reveal the letter</div>
                </div>
                <div class="card-face card-back">
                    <div class="card-letter" id="cardLetter">A</div>
                    <div class="card-word" id="cardWord">Apple</div>
                    <div class="card-description" id="cardDescription">The first letter of the alphabet</div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn btn-secondary" id="prevBtn">‚Üê Previous</button>
            <button class="btn btn-primary" id="flipBtn">Flip Card</button>
            <button class="btn btn-secondary" id="nextBtn">Next ‚Üí</button>
            <button class="btn btn-warning" id="shuffleBtn">üîÄ Shuffle</button>
        </div>

        <div class="voice-controls">
            <h3>Voice Recognition Testing</h3>
            <div class="voice-status">
                <div class="status-indicator" id="voiceIndicator"></div>
                <span id="voiceStatus">Voice recognition ready</span>
            </div>
            <div class="action-buttons">
                <button class="btn btn-success" id="startVoiceBtn">üé§ Start Voice Test</button>
                <button class="btn btn-secondary" id="stopVoiceBtn" disabled>‚èπÔ∏è Stop</button>
            </div>
            <div id="voiceResult" class="feedback hidden"></div>
        </div>

        <div class="quiz-mode" id="quizMode">
            <h3>Quiz Mode</h3>
            <div class="quiz-options" id="quizOptions"></div>
            <div class="action-buttons">
                <button class="btn btn-primary" id="startQuizBtn">Start Quiz</button>
                <button class="btn btn-secondary" id="endQuizBtn" disabled>End Quiz</button>
            </div>
            <div id="quizFeedback" class="feedback hidden"></div>
        </div>
    </div>

    <script>
        class ASLFlashcards {
            constructor() {
                this.currentCardIndex = 0;
                this.isFlipped = false;
                this.correctAnswers = 0;
                this.streakCount = 0;
                this.maxStreak = 0;
                this.autoFlipTimer = null;
                this.isQuizMode = false;
                this.quizAnswered = false;
                this.currentQuizAnswer = '';
                
                // Web Speech API
                this.recognition = null;
                this.isListening = false;
                
                // ASL Data
                this.datasets = {
                    alphabet: [
                        {sign: 'üëã', letter: 'A', word: 'Apple', description: 'The first letter of the alphabet'},
                        {sign: '‚úã', letter: 'B', word: 'Ball', description: 'The second letter of the alphabet'},
                        {sign: 'ü§è', letter: 'C', word: 'Cat', description: 'The third letter of the alphabet'},
                        {sign: 'üëâ', letter: 'D', word: 'Dog', description: 'The fourth letter of the alphabet'},
                        {sign: 'üñêÔ∏è', letter: 'E', word: 'Elephant', description: 'The fifth letter of the alphabet'},
                        {sign: 'ü§å', letter: 'F', word: 'Fish', description: 'The sixth letter of the alphabet'},
                        {sign: 'üëç', letter: 'G', word: 'Goat', description: 'The seventh letter of the alphabet'},
                        {sign: '‚úåÔ∏è', letter: 'H', word: 'House', description: 'The eighth letter of the alphabet'},
                        {sign: 'ü§ô', letter: 'I', word: 'Ice', description: 'The ninth letter of the alphabet'},
                        {sign: 'ü§ò', letter: 'J', word: 'Jump', description: 'The tenth letter of the alphabet'},
                        {sign: 'ü§ö', letter: 'K', word: 'Kite', description: 'The eleventh letter of the alphabet'},
                        {sign: 'üëå', letter: 'L', word: 'Lion', description: 'The twelfth letter of the alphabet'},
                        {sign: 'ü§õ', letter: 'M', word: 'Mouse', description: 'The thirteenth letter of the alphabet'},
                        {sign: 'ü§ú', letter: 'N', word: 'Nest', description: 'The fourteenth letter of the alphabet'},
                        {sign: 'üëä', letter: 'O', word: 'Orange', description: 'The fifteenth letter of the alphabet'},
                        {sign: 'ü´≥', letter: 'P', word: 'Pen', description: 'The sixteenth letter of the alphabet'},
                        {sign: 'ü´¥', letter: 'Q', word: 'Queen', description: 'The seventeenth letter of the alphabet'},
                        {sign: 'üññ', letter: 'R', word: 'Robot', description: 'The eighteenth letter of the alphabet'},
                        {sign: '‚úä', letter: 'S', word: 'Sun', description: 'The nineteenth letter of the alphabet'},
                        {sign: 'ü´µ', letter: 'T', word: 'Tree', description: 'The twentieth letter of the alphabet'},
                        {sign: 'ü§ü', letter: 'U', word: 'Umbrella', description: 'The twenty-first letter of the alphabet'},
                        {sign: 'ü´∞', letter: 'V', word: 'Violin', description: 'The twenty-second letter of the alphabet'},
                        {sign: 'ü§û', letter: 'W', word: 'Water', description: 'The twenty-third letter of the alphabet'},
                        {sign: 'ü´∂', letter: 'X', word: 'X-ray', description: 'The twenty-fourth letter of the alphabet'},
                        {sign: 'ü§ù', letter: 'Y', word: 'Yellow', description: 'The twenty-fifth letter of the alphabet'},
                        {sign: 'üëê', letter: 'Z', word: 'Zebra', description: 'The twenty-sixth letter of the alphabet'}
                    ],
                    numbers: [
                        {sign: '‚òùÔ∏è', letter: '1', word: 'One', description: 'The number one'},
                        {sign: '‚úåÔ∏è', letter: '2', word: 'Two', description: 'The number two'},
                        {sign: 'ü§ü', letter: '3', word: 'Three', description: 'The number three'},
                        {sign: 'üññ', letter: '4', word: 'Four', description: 'The number four'},
                        {sign: 'üñêÔ∏è', letter: '5', word: 'Five', description: 'The number five'},
                        {sign: 'ü§ö', letter: '6', word: 'Six', description: 'The number six'},
                        {sign: 'ü§è', letter: '7', word: 'Seven', description: 'The number seven'},
                        {sign: 'ü§ò', letter: '8', word: 'Eight', description: 'The number eight'},
                        {sign: 'ü§ô', letter: '9', word: 'Nine', description: 'The number nine'},
                        {sign: '‚úä', letter: '10', word: 'Ten', description: 'The number ten'}
                    ],
                    'common-words': [
                        {sign: 'üëã', letter: 'Hello', word: 'Greeting', description: 'A common greeting'},
                        {sign: 'ü§ù', letter: 'Thank You', word: 'Gratitude', description: 'Expressing thanks'},
                        {sign: 'üëç', letter: 'Good', word: 'Positive', description: 'Something positive'},
                        {sign: 'üëé', letter: 'Bad', word: 'Negative', description: 'Something negative'},
                        {sign: 'ü§∑', letter: 'Sorry', word: 'Apology', description: 'Expressing regret'},
                        {sign: 'üëå', letter: 'OK', word: 'Agreement', description: 'Showing agreement'}
                    ],
                    colors: [
                        {sign: 'üî¥', letter: 'Red', word: 'Color', description: 'The color red'},
                        {sign: 'üîµ', letter: 'Blue', word: 'Color', description: 'The color blue'},
                        {sign: 'üü¢', letter: 'Green', word: 'Color', description: 'The color green'},
                        {sign: 'üü°', letter: 'Yellow', word: 'Color', description: 'The color yellow'},
                        {sign: 'üü†', letter: 'Orange', word: 'Color', description: 'The color orange'},
                        {sign: 'üü£', letter: 'Purple', word: 'Color', description: 'The color purple'}
                    ],
                    family: [
                        {sign: 'üë®', letter: 'Father', word: 'Parent', description: 'Male parent'},
                        {sign: 'üë©', letter: 'Mother', word: 'Parent', description: 'Female parent'},
                        {sign: 'üë∂', letter: 'Baby', word: 'Child', description: 'Young child'},
                        {sign: 'üë¶', letter: 'Boy', word: 'Child', description: 'Male child'},
                        {sign: 'üëß', letter: 'Girl', word: 'Child', description: 'Female child'},
                        {sign: 'üë¥', letter: 'Grandfather', word: 'Elder', description: 'Male grandparent'},
                        {sign: 'üëµ', letter: 'Grandmother', word: 'Elder', description: 'Female grandparent'}
                    ]
                };
                
                this.currentDataset = this.datasets.alphabet;
                this.shuffledDataset = [...this.currentDataset];
                
                this.initializeApp();
                this.setupEventListeners();
                this.initializeVoiceRecognition();
                this.updateCard();
                this.updateStats();
            }
            
            initializeApp() {
                // Initialize accessibility features
                this.setupAccessibility();
                
                // Initialize auto-flip
                this.setupAutoFlip();
            }
            
            setupAccessibility() {
                const highContrast = document.getElementById('highContrast');
                const largeText = document.getElementById('largeText');
                const reduceMotion = document.getElementById('reduceMotion');
                
                highContrast.addEventListener('change', (e) => {
                    document.body.classList.toggle('high-contrast', e.target.checked);
                });
                
                largeText.addEventListener('change', (e) => {
                    document.body.classList.toggle('large-text', e.target.checked);
                });
                
                reduceMotion.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        document.documentElement.style.setProperty('--transition', 'none');
                    } else {
                        document.documentElement.style.setProperty('--transition', 'all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)');
                    }
                });
            }
            
            setupEventListeners() {
                // Card interaction
                document.getElementById('flashcard').addEventListener('click', () => this.flipCard());
                document.getElementById('flipBtn').addEventListener('click', () => this.flipCard());
                document.getElementById('prevBtn').addEventListener('click', () => this.previousCard());
                document.getElementById('nextBtn').addEventListener('click', () => this.nextCard());
                document.getElementById('shuffleBtn').addEventListener('click', () => this.shuffleCards());
                
                // Controls
                document.getElementById('studyMode').addEventListener('change', (e) => this.changeStudyMode(e.target.value));
                document.getElementById('autoFlip').addEventListener('change', (e) => this.setupAutoFlip());
                
                // Voice controls
                document.getElementById('startVoiceBtn').addEventListener('click', () => this.startVoiceRecognition());
                document.getElementById('stopVoiceBtn').addEventListener('click', () => this.stopVoiceRecognition());
                
                // Quiz controls
                document.getElementById('startQuizBtn').addEventListener('click', () => this.startQuiz());
                document.getElementById('endQuizBtn').addEventListener('click', () => this.endQuiz());
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => this.handleKeyboard(e));
            }
            
            handleKeyboard(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') return;
                
                switch(e.key) {
                    case ' ':
                    case 'Enter':
                        e.preventDefault();
                        this.flipCard();
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        this.previousCard();
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        this.nextCard();
                        break;
                    case 'r':
                        e.preventDefault();
                        this.shuffleCards();
                        break;
                    case 'q':
                        e.preventDefault();
                        if (!this.isQuizMode) {
                            this.startQuiz();
                        } else {
                            this.endQuiz();
                        }
                        break;
                }
            }
            
            setupAutoFlip() {
                if (this.autoFlipTimer) {
                    clearInterval(this.autoFlipTimer);
                    this.autoFlipTimer = null;
                }
                
                const autoFlipSeconds = parseFloat(document.getElementById('autoFlip').value);
                if (autoFlipSeconds > 0) {
                    this.autoFlipTimer = setInterval(() => {
                        if (!this.isQuizMode) {
                            this.flipCard();
                        }
                    }, autoFlipSeconds * 1000);
                }
            }
            
            changeStudyMode(mode) {
                this.currentDataset = this.datasets[mode];
                this.shuffledDataset = [...this.currentDataset];
                this.currentCardIndex = 0;
                this.isFlipped = false;
                this.updateCard();
                this.updateStats();
                this.endQuiz();
            }
            
            flipCard() {
                if (this.isQuizMode && !this.quizAnswered) return;
                
                this.isFlipped = !this.isFlipped;
                const flashcard = document.getElementById('flashcard');
                flashcard.classList.toggle('flipped', this.isFlipped);
            }
            
            nextCard() {
                this.currentCardIndex = (this.currentCardIndex + 1) % this.shuffledDataset.length;
                this.isFlipped = false;
                this.quizAnswered = false;
                this.updateCard();
                this.updateStats();
                if (this.isQuizMode) {
                    this.generateQuizOptions();
                }
            }
            
            previousCard() {
                this.currentCardIndex = (this.currentCardIndex - 1 + this.shuffledDataset.length) % this.shuffledDataset.length;
                this.isFlipped = false;
                this.quizAnswered = false;
                this.updateCard();
                this.updateStats();
                if (this.isQuizMode) {
                    this.generateQuizOptions();
                }
            }
            
            shuffleCards() {
                this.shuffledDataset = [...this.currentDataset].sort(() => Math.random() - 0.5);
                this.currentCardIndex = 0;
                this.isFlipped = false;
                this.quizAnswered = false;
                this.updateCard();
                this.updateStats();
                if (this.isQuizMode) {
                    this.generateQuizOptions();
                }
            }
            
            updateCard() {
                const currentCard = this.shuffledDataset[this.currentCardIndex];
                const flashcard = document.getElementById('flashcard');
                
                document.getElementById('handSign').textContent = currentCard.sign;
                document.getElementById('cardLetter').textContent = currentCard.letter;
                document.getElementById('cardWord').textContent = currentCard.word;
                document.getElementById('cardDescription').textContent = currentCard.description;
                
                flashcard.classList.remove('flipped');
                this.isFlipped = false;
                
                // Add subtle animation
                flashcard.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    flashcard.style.transform = 'scale(1)';
                }, 150);
            }
            
            updateStats() {
                document.getElementById('currentCard').textContent = this.currentCardIndex + 1;
                document.getElementById('totalCards').textContent = this.shuffledDataset.length;
                document.getElementById('correctAnswers').textContent = this.correctAnswers;
                document.getElementById('streakCount').textContent = this.streakCount;
                
                const progress = ((this.currentCardIndex + 1) / this.shuffledDataset.length) * 100;
                document.getElementById('progressFill').style.width = `${progress}%`;
            }
            
            initializeVoiceRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = 'en-US';
                    
                    this.recognition.onstart = () => {
                        this.isListening = true;
                        document.getElementById('voiceIndicator').classList.add('listening');
                        document.getElementById('voiceStatus').textContent = 'Listening... Say the letter or word you see';
                        document.getElementById('startVoiceBtn').disabled = true;
                        document.getElementById('stopVoiceBtn').disabled = false;
                    };
                    
                    this.recognition.onresult = (event) => {
                        const result = event.results[0][0].transcript.toLowerCase().trim();
                        this.processVoiceResult(result);
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        this.stopVoiceRecognition();
                        document.getElementById('voiceStatus').textContent = 'Voice recognition error. Please try again.';
                    };
                    
                    this.recognition.onend = () => {
                        this.stopVoiceRecognition();
                    };
                } else {
                    document.getElementById('startVoiceBtn').disabled = true;
                    document.getElementById('voiceStatus').textContent = 'Voice recognition not supported in this browser';
                }
            }
            
            startVoiceRecognition() {
                if (this.recognition && !this.isListening) {
                    this.recognition.start();
                }
            }
            
            stopVoiceRecognition() {
                if (this.recognition && this.isListening) {
                    this.recognition.stop();
                }
                this.isListening = false;
                document.getElementById('voiceIndicator').classList.remove('listening');
                document.getElementById('voiceStatus').textContent = 'Voice recognition ready';
                document.getElementById('startVoiceBtn').disabled = false;
                document.getElementById('stopVoiceBtn').disabled = true;
            }
            
            processVoiceResult(result) {
                const currentCard = this.shuffledDataset[this.currentCardIndex];
                const correctAnswers = [
                    currentCard.letter.toLowerCase(),
                    currentCard.word.toLowerCase(),
                    currentCard.description.toLowerCase()
                ];
                
                const isCorrect = correctAnswers.some(answer => 
                    result.includes(answer) || answer.includes(result)
                );
                
                const resultDiv = document.getElementById('voiceResult');
                resultDiv.classList.remove('hidden', 'correct', 'incorrect');
                
                if (isCorrect) {
                    resultDiv.classList.add('correct');
                    resultDiv.textContent = `‚úì Correct! You said: "${result}"`;
                    this.correctAnswers++;
                    this.streakCount++;
                    this.maxStreak = Math.max(this.maxStreak, this.streakCount);
                } else {
                    resultDiv.classList.add('incorrect');
                    resultDiv.textContent = `‚úó You said: "${result}". Try: "${currentCard.letter}" or "${currentCard.word}"`;
                    this.streakCount = 0;
                }
                
                this.updateStats();
                
                // Auto-advance after voice recognition
                setTimeout(() => {
                    if (!this.isFlipped) {
                        this.flipCard();
                    }
                    setTimeout(() => {
                        this.nextCard();
                        resultDiv.classList.add('hidden');
                    }, 2000);
                }, 1500);
            }
            
            startQuiz() {
                this.isQuizMode = true;
                this.quizAnswered = false;
                document.getElementById('startQuizBtn').disabled = true;
                document.getElementById('endQuizBtn').disabled = false;
                document.getElementById('quizMode').style.background = 'rgba(0, 122, 255, 0.05)';
                this.generateQuizOptions();
            }
            
            endQuiz() {
                this.isQuizMode = false;
                this.quizAnswered = false;
                document.getElementById('startQuizBtn').disabled = false;
                document.getElementById('endQuizBtn').disabled = true;
                document.getElementById('quizMode').style.background = 'var(--surface)';
                document.getElementById('quizOptions').innerHTML = '';
                document.getElementById('quizFeedback').classList.add('hidden');
            }
            
            generateQuizOptions() {
                if (!this.isQuizMode) return;
                
                const currentCard = this.shuffledDataset[this.currentCardIndex];
                const correctAnswer = currentCard.letter;
                this.currentQuizAnswer = correctAnswer;
                
                // Generate wrong answers
                const allAnswers = this.currentDataset.map(card => card.letter);
                const wrongAnswers = allAnswers.filter(answer => answer !== correctAnswer);
                const shuffledWrong = wrongAnswers.sort(() => Math.random() - 0.5).slice(0, 3);
                
                // Combine and shuffle all options
                const options = [correctAnswer, ...shuffledWrong].sort(() => Math.random() - 0.5);
                
                const optionsContainer = document.getElementById('quizOptions');
                optionsContainer.innerHTML = '';
                
                options.forEach(option => {
                    const optionButton = document.createElement('div');
                    optionButton.className = 'quiz-option';
                    optionButton.textContent = option;
                    optionButton.addEventListener('click', () => this.handleQuizAnswer(option, optionButton));
                    optionsContainer.appendChild(optionButton);
                });
                
                document.getElementById('quizFeedback').classList.add('hidden');
            }
            
            handleQuizAnswer(selectedAnswer, buttonElement) {
                if (this.quizAnswered) return;
                
                this.quizAnswered = true;
                const isCorrect = selectedAnswer === this.currentQuizAnswer;
                
                // Update button states
                const allOptions = document.querySelectorAll('.quiz-option');
                allOptions.forEach(option => {
                    option.style.pointerEvents = 'none';
                    if (option.textContent === this.currentQuizAnswer) {
                        option.classList.add('correct');
                    } else if (option === buttonElement && !isCorrect) {
                        option.classList.add('incorrect');
                    }
                });
                
                // Show feedback
                const feedbackDiv = document.getElementById('quizFeedback');
                feedbackDiv.classList.remove('hidden', 'correct', 'incorrect');
                
                if (isCorrect) {
                    feedbackDiv.classList.add('correct');
                    feedbackDiv.textContent = 'üéâ Excellent! Correct answer!';
                    this.correctAnswers++;
                    this.streakCount++;
                } else {
                    feedbackDiv.classList.add('incorrect');
                    feedbackDiv.textContent = `‚ùå Not quite. The correct answer is "${this.currentQuizAnswer}"`;
                    this.streakCount = 0;
                }
                
                this.updateStats();
                
                // Auto-advance after quiz answer
                setTimeout(() => {
                    this.nextCard();
                    allOptions.forEach(option => {
                        option.style.pointerEvents = 'auto';
                        option.classList.remove('correct', 'incorrect');
                    });
                }, 2500);
            }
        }
        
        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ASLFlashcards();
        });
        
        // Add some performance optimizations
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // Pause any running timers when tab is not visible
                const app = window.aslApp;
                if (app && app.autoFlipTimer) {
                    clearInterval(app.autoFlipTimer);
                }
            } else {
                // Resume timers when tab becomes visible
                const app = window.aslApp;
                if (app) {
                    app.setupAutoFlip();
                }
            }
        });
    </script>
</body>
</html>